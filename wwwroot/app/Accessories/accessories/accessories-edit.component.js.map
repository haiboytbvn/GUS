{"version":3,"sources":["Accessories/accessories/accessories-edit.component.ts"],"names":["AccessoriesEditComponent","fb","accessoriesService","categoryService","productnameService","acctypeService","brandService","deptService","divisionService","colorService","router","authService","activatedRoute","this","title","errorMessage","isDelete","isFormValuesChanged","prototype","changeType","id","_this","getAccCateogryListByType","subscribe","items","categories","error","changeCategory","disableProductName","GetAccProductNameByCategory","productnames","fileChangeEvent","fileUpload","jQuery","get","files","data","FormData","i","length","append","name","ajax","type","url","contentType","processData","success","prop","UploadPath","mainimage","imagepath","appendstring","val","html","Image","alert","ngOnInit","isLoggedIn","navigate","disableCategory","snapshot","params","paging","pagination_model_1","PaginationModel","searchModel","generalsearch_model_1","GeneralSearchModel","pageall","getAll","getAccessoryCategoryList","Data","getAccessoryProductNameList","getAccessoryTypeList","types","getBrandList","brands","getDepartmentList","departments","getDivisionList","divisions","getColorList","colors","iseditting","buttonvalue","onUpdate","update","isFormChanged","value","Id","oldData","isFormDataChanged","changeImage","path","console","log","JSON","stringify","__decorate","core_1","Component","selector","templateUrl","providers","accessories_service_1","AccessoryService","forms_1","FormBuilder","accessorycategory_service_1","AccessoryCategoryService","accessoryproductname_service_1","AccessoryProductNameService","brand_service_1","BrandService","accessorytype_service_1","AccessoryTypeService","department_service_1","DepartmentService","division_service_1","DivisionService","color_service_1","ColorService","exports_1"],"mappings":"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","file":"accessories-edit.component.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from \"@angular/core\";\nimport { FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { Accessory } from \"../../Accessories/shared/accessories.model\";\nimport { AccessoryService } from \"../../Accessories/shared/accessories.service\";\n\nimport { AccessoryCategory } from \"../../AccessoryCategory/shared/accessorycategory.model\";\nimport { AccessoryCategoryService } from \"../../AccessoryCategory/shared/accessorycategory.service\";\n\nimport { AccessoryProductName } from \"../../AccessoryProductName/shared/accessoryproductname.model\";\nimport { AccessoryProductNameService } from \"../../AccessoryProductName/shared/accessoryproductname.service\";\n\r\nimport { Color } from \"../../Color/shared/color.model\";\r\nimport { ColorService } from \"../../Color/shared/color.service\";\r\nimport { ColorSearchModel } from \"../../Color/shared/color-search.model\";\r\n\r\nimport { AccessoryType } from \"../../AccessoryType/shared/accessorytype.model\";\r\nimport { AccessoryTypeService } from \"../../AccessoryType/shared/accessorytype.service\";\r\n\r\n\r\nimport { Department } from \"../../Department/shared/department.model\";\nimport { DepartmentService } from \"../../Department/shared/department.service\";\nimport { Division } from \"../../Division/shared/division.model\";\nimport { DivisionService } from \"../../Division/shared/division.service\";\nimport { Brand } from \"../../Brand/shared/brand.model\";\nimport { BrandService } from \"../../Brand/shared/brand.service\";\nimport { AuthService } from \"../../auth.service\";\nimport { SearchGeneralFilter } from \"../../SearchGeneralFilter/shared/searchGeneralFilter.model\";\nimport { GeneralSearchModel } from \"../../Pagination/shared/generalsearch.model\";\r\nimport { PaginationModel } from \"../../Pagination/shared/pagination.model\";\ndeclare var jQuery: any;\n\n@Component({\n    selector: \"accessories-edit\",\n    templateUrl: \"app/Accessories/accessories/accessories-edit.component.html\",\n    providers: [AccessoryService, FormBuilder, AccessoryCategoryService, AccessoryProductNameService, BrandService, AccessoryTypeService, DepartmentService, DivisionService, ColorService]\n})\n\nexport class AccessoriesEditComponent {\n    data: Accessory;\n    title = \"Edit Accessories\";\n    accessoriesForm: FormGroup;\n    errorMessage = null;\n    isDelete = false;\n    isFormValuesChanged = false;\n    oldData: Accessory;\n    categories: AccessoryCategory[];\n    productnames: AccessoryProductName[];\n    types: AccessoryType[];\r\n    brands: Brand[];\r\n    departments: Department[];\r\n    divisions: Division[];\r\n\r\n    colors: Color[];\n    searchModel: GeneralSearchModel;\r\n    paging: PaginationModel;\n    iseditting: boolean;\n    buttonvalue: string;\n    disableProductName: boolean;\r\n    disableCategory: boolean;\n    constructor(\n        private fb: FormBuilder,\n        private accessoriesService: AccessoryService,\n        private categoryService: AccessoryCategoryService,\n        private productnameService: AccessoryProductNameService,\n        private acctypeService: AccessoryTypeService,\r\n        private brandService: BrandService,\r\n        private deptService: DepartmentService,\r\n        private divisionService: DivisionService,\r\n        private colorService: ColorService,\n        private router: Router,\n        private authService: AuthService,\n        private activatedRoute: ActivatedRoute) {\n    }\n    changeType(id: string) {\n        this.categoryService.getAccCateogryListByType(id).subscribe(items => this.categories = items, error => this.errorMessage = <any>error);\n    }\n    changeCategory(id: string) {\n        if (id === \"\") {\r\n\r\n            this.disableProductName = true;\r\n        } else {\r\n            this.disableProductName = false;\r\n            this.productnameService.GetAccProductNameByCategory(id).subscribe(items => this.productnames = items, error => this.errorMessage = <any>error);\r\n        }\n\n    }\n    fileChangeEvent() {\n\n        var fileUpload = jQuery(\"#files\").get(0);\r\n        var files = fileUpload.files;\r\n        var data = new FormData();\r\n        for (var i = 0; i < files.length; i++) {\r\n            data.append(files[i].name, files[i]);\r\n        }\r\n        jQuery.ajax({\r\n            type: \"POST\",\r\n            url: \"api/accessory/UploadImage\",\r\n            contentType: false,\r\n            processData: false,\r\n            data: data,\r\n            success: function (data) {\r\n                jQuery('#imgPreview').prop(\"src\", data[0].UploadPath);\r\n                this.mainimage = data[0].UploadPath;\r\n                var imagepath = \"\";\r\n                var appendstring = \"\";\n                for (var i = 0; i < data.length; i++) {\r\n\r\n                    imagepath += data[i].UploadPath + \"|\";\r\n                    appendstring += \"<li><a href=\\\"javascript:void(0);\\\" [(click)]=\\\"changeImage(\" + data[i].UploadPath + \")\\\"><img src=\\\"\" + data[i].UploadPath + \"\\\" alt=\\\"accessory image\\\"></a></li>\"\r\n                    // this.listimages.push(data[i].UploadPath);\r\n                }\n                jQuery('#hdImage').val(imagepath);\r\n                jQuery('#imagecontainer').html('');\n                jQuery('#imagecontainer').html(appendstring);\n                this.data.Image = imagepath;\r\n            },\r\n            error: function () {\r\n                alert(\"There was error uploading files!\");\r\n            }\r\n        });\r\n\n    }\n    ngOnInit() {\n        if (!this.authService.isLoggedIn()) {\r\n            this.router.navigate([\"\"]);\r\n        }\n        this.disableCategory = true;\r\n        this.disableProductName = true;\n        var id = this.activatedRoute.snapshot.params[\"id\"];\n        if (id) {\n            this.accessoriesService.get(id).subscribe((data) => {\n                this.data = data;\n            });\n        }\n        else {\n            this.router.navigate([\"accessories/add\"]);\n        }\n        this.paging = new PaginationModel(10, 1, \"Name\", 0, [], 0);\r\n        this.searchModel = new GeneralSearchModel(\"\", \"\", \"\", \"\", this.paging);\r\n        var pageall = new PaginationModel(10, 0, \"Name\", 0, [], 0);\r\n        var getAll = new GeneralSearchModel(\"\", \"\", \"\", \"\", pageall);\r\n        this.categoryService.getAccessoryCategoryList(getAll).subscribe(items => this.categories = items.Data, error => this.errorMessage = <any>error);\r\n        this.productnameService.getAccessoryProductNameList(getAll).subscribe(items => this.productnames = items.Data, error => this.errorMessage = <any>error);\r\n        this.acctypeService.getAccessoryTypeList(getAll).subscribe(items => this.types = items.Data, error => this.errorMessage = <any>error);\r\n        this.brandService.getBrandList(getAll).subscribe(items => this.brands = items.Data, error => this.errorMessage = <any>error);\r\n        this.deptService.getDepartmentList(getAll).subscribe(items => this.departments = items.Data, error => this.errorMessage = <any>error);\r\n        this.divisionService.getDivisionList(getAll).subscribe(items => this.divisions = items.Data, error => this.errorMessage = <any>error);\r\n        this.colorService.getColorList(getAll).subscribe(items => this.colors = items.Data, error => this.errorMessage = <any>error);\r\n        this.title = \"Edit Accessories\";\n        this.iseditting = false;\n        this.buttonvalue = \"Edit\";\n    }\n  \n    onUpdate(data: Accessory) {\n\n        if (this.iseditting) {\n            data.Image = jQuery('#hdImagepath').val();\n            this.accessoriesService.update(data).subscribe((data) => {\n                    if (data.error == null) {\n                        this.data = data;\n                        alert('Accessorie details updated successfully');\n                        this.router.navigate([\"/accessories\"]);\n                    } else {\n                        // update failure\n                        this.errorMessage = data.error;\n                        alert(this.errorMessage);\n                    }\n                },\n                (error) => {\n                    this.errorMessage = error;\n\n                }\n            );\n        } else {\n            this.buttonvalue = \"Save\";\n            this.iseditting = true;\n        }\n    }\n\n    isFormChanged(value) {\n        this.accessoriesService.get(this.data.Id).subscribe((oldData) => {\n            this.isFormDataChanged(oldData);\n        });\n    }\n    changeImage(path: string) {\n        jQuery('#imgPreview').prop(\"src\", path);\n    }\n    isFormDataChanged(oldData: Accessory) {\n        console.log(this.data);\n        console.log(oldData);\n        if (JSON.stringify(this.data) === JSON.stringify(oldData))\n            this.isFormValuesChanged = false;\n        else\n            this.isFormValuesChanged = true;\n    }\n}"]}