{"version":3,"sources":["Accessories/accessories/accessories-add.component.ts"],"names":["AccessoriesAddComponent","fb","accessoriesService","categoryService","accproductnameService","acctypeService","brandService","deptService","divisionService","colorService","router","authService","activatedRoute","this","errorMessage","prototype","changeType","id","_this","disableCategory","disableProductName","getAccCateogryListByType","subscribe","items","categories","error","changeCategory","GetAccProductNameByCategory","productnames","doUpload","jQuery","trigger","ngOnInit","isLoggedIn","navigate","listimages","mainimage","accessoriesForm","group","buyercode","isactive","acccategory","forms_1","Validators","required","productname","acctype","itemsize","supplier","suppliercode","brand","division","remark","department","color","description","pageall","pagination_model_1","PaginationModel","getAll","generalsearch_model_1","GeneralSearchModel","getAccessoryCategoryList","Data","getAccessoryProductNameList","getAccessoryTypeList","types","getBrandList","brands","getDepartmentList","departments","getDivisionList","divisions","getColorList","colors","data","accessories_model_1","Accessory","title","fileChangeEvent","fileUpload","get","files","FormData","i","length","append","name","ajax","type","url","contentType","processData","success","prop","UploadPath","imagepath","appendstring","val","html","Image","alert","changeImage","path","onSubmit","console","log","newData","add","__decorate","core_1","ViewChild","Component","selector","templateUrl","providers","accessories_service_1","AccessoryService","FormBuilder","accessorycategory_service_1","AccessoryCategoryService","accessoryproductname_service_1","AccessoryProductNameService","brand_service_1","BrandService","accessorytype_service_1","AccessoryTypeService","department_service_1","DepartmentService","division_service_1","DivisionService","color_service_1","ColorService","exports_1"],"mappings":"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","file":"accessories-add.component.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit, OnDestroy } from \"@angular/core\";\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\r\nimport { Router, ActivatedRoute } from \"@angular/router\";\r\nimport { Accessory } from \"../../Accessories/shared/accessories.model\";\r\nimport { AccessoryService } from \"../../Accessories/shared/accessories.service\";\r\n\r\nimport { AccessoryCategory } from \"../../AccessoryCategory/shared/accessorycategory.model\";\r\nimport { AccessoryCategoryService } from \"../../AccessoryCategory/shared/accessorycategory.service\";\r\n\r\nimport { AccessoryProductName } from \"../../AccessoryProductName/shared/accessoryproductname.model\";\r\nimport { AccessoryProductNameService } from \"../../AccessoryProductName/shared/accessoryproductname.service\";\r\n\r\nimport { Color } from \"../../Color/shared/color.model\";\r\nimport { ColorService } from \"../../Color/shared/color.service\";\r\nimport { ColorSearchModel } from \"../../Color/shared/color-search.model\"; \r\n\r\nimport { AccessoryType } from \"../../AccessoryType/shared/accessorytype.model\";\r\nimport { AccessoryTypeService } from \"../../AccessoryType/shared/accessorytype.service\";\r\n\r\nimport { Department } from \"../../Department/shared/department.model\";\nimport { DepartmentService } from \"../../Department/shared/department.service\";\nimport { Division } from \"../../Division/shared/division.model\";\nimport { DivisionService } from \"../../Division/shared/division.service\";\nimport { Brand } from \"../../Brand/shared/brand.model\";\nimport { BrandService } from \"../../Brand/shared/brand.service\";\r\nimport { AuthService } from \"../../auth.service\";\r\nimport { GeneralSearchModel } from \"../../Pagination/shared/generalsearch.model\";\r\nimport { PaginationModel } from \"../../Pagination/shared/pagination.model\";\r\ndeclare var jQuery: any;\r\n\r\n@Component({\r\n    selector: \"accessories-add\",\r\n    templateUrl:'app/Accessories/accessories/accessories-add.component.html',\r\n    providers: [AccessoryService, FormBuilder, AccessoryCategoryService, AccessoryProductNameService, BrandService, AccessoryTypeService, DepartmentService, DivisionService, ColorService]\r\n})\r\n\r\nexport class AccessoriesAddComponent {\r\n    data: Accessory;\r\n    title: string;\r\n    accessoriesForm: FormGroup;\r\n    errorMessage = null;\r\n    @ViewChild('errorDiv') errorDiv: ElementRef;\r\n    categories: AccessoryCategory[];\r\n    productnames: AccessoryProductName[];\r\n    types: AccessoryType[];\r\n    brands: Brand[];\r\n    departments: Department[];\r\n    divisions: Division[];\r\n    colors: Color[];\r\n    disableProductName: boolean;\r\n    disableCategory: boolean;\r\n    listimages: string[];\r\n    mainimage: string;\r\n\r\n    constructor(\r\n        private fb: FormBuilder,\r\n        private accessoriesService: AccessoryService,\r\n        private categoryService: AccessoryCategoryService,\r\n        private accproductnameService: AccessoryProductNameService,\r\n        private acctypeService: AccessoryTypeService,\r\n        private brandService: BrandService,\r\n        private deptService: DepartmentService,\r\n        private divisionService: DivisionService,\r\n        private colorService:ColorService,\r\n        private router: Router,\r\n        private authService: AuthService,\r\n        private activatedRoute: ActivatedRoute) {\r\n    }\r\n    changeType(id: string) {\n        if (id === \"\") {\r\n\r\n            this.disableCategory = true;\r\n            this.disableProductName = true;\r\n        } else {\r\n\r\n            this.disableCategory = false;\r\n            this.categoryService.getAccCateogryListByType(id).subscribe(items => this.categories = items, error => this.errorMessage = <any>error);\r\n        }       \r\n       \n       \n    }\r\n    changeCategory(id: string) {\n        if (id === \"\") {\r\n\r\n            this.disableProductName = true;\r\n        } else {\r\n            this.disableProductName = false;\r\n            this.accproductnameService.GetAccProductNameByCategory(id).subscribe(items => this.productnames = items, error => this.errorMessage = <any>error);\r\n        }\n        \n    }\r\n    doUpload() {\n        jQuery(\"#files\").trigger(\"click\");\n    }\r\n    ngOnInit() {\r\n        if (!this.authService.isLoggedIn()) {\r\n            this.router.navigate([\"\"]);\r\n        }\r\n        this.disableCategory = true;\r\n        this.disableProductName = true;\r\n\r\n        this.listimages = [];\r\n        this.mainimage = \"\";\r\n        this.accessoriesForm = this.fb.group(\r\n            {            \r\n                buyercode: [\"\"],\r\n                isactive:[true],\r\n                acccategory: [\"\", [Validators.required]],\r\n                productname: [\"\", [Validators.required]],\r\n                acctype: [\"\", [Validators.required]],\r\n                itemsize:[\"\"],\r\n                supplier: [\"\"],\r\n                suppliercode: [\"\"],\r\n                brand: [\"\", [Validators.required]],\r\n                division: [\"\", [Validators.required]],\r\n                remark:[\"\"],\r\n                department: [\"\", [Validators.required]],\r\n                color: [\"\", [Validators.required]],\r\n                description:[\"\"]\r\n\r\n                          \r\n            }\r\n        );\r\n        var pageall = new PaginationModel(10, 0, \"Name\", 0, [], 0);\r\n        var getAll = new GeneralSearchModel(\"\", \"\", \"\", \"\", pageall);\r\n\r\n        this.categoryService.getAccessoryCategoryList(getAll).subscribe(items => this.categories = items.Data, error => this.errorMessage = <any>error);\r\n        this.accproductnameService.getAccessoryProductNameList(getAll).subscribe(items => this.productnames = items.Data, error => this.errorMessage = <any>error);\r\n        this.acctypeService.getAccessoryTypeList(getAll).subscribe(items => this.types = items.Data, error => this.errorMessage = <any>error);\r\n        this.brandService.getBrandList(getAll).subscribe(items => this.brands = items.Data, error => this.errorMessage = <any>error);\r\n        this.deptService.getDepartmentList(getAll).subscribe(items => this.departments = items.Data, error => this.errorMessage = <any>error);\r\n        this.divisionService.getDivisionList(getAll).subscribe(items => this.divisions = items.Data, error => this.errorMessage = <any>error);\r\n        this.colorService.getColorList(getAll).subscribe(items => this.colors = items.Data, error => this.errorMessage = <any>error);\r\n        this.data = new Accessory(\"\", false, \"\",\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\",[],\"\");\r\n        this.title = \"New Accessories\";\r\n    }\r\n\r\n\r\n    fileChangeEvent() {\n\n        var fileUpload = jQuery(\"#files\").get(0);\r\n        var files = fileUpload.files;\r\n        var data = new FormData();\r\n        for (var i = 0; i < files.length; i++) {\r\n            data.append(files[i].name, files[i]);\r\n        }\r\n        jQuery.ajax({\r\n            type: \"POST\",\r\n            url: \"api/accessory/UploadImage\",\r\n            contentType: false,\r\n            processData: false,\r\n            data: data,\r\n            success: function (data) {\r\n                jQuery('#imgPreview').prop(\"src\", data[0].UploadPath);\r\n                this.mainimage = data[0].UploadPath;\r\n                var imagepath = \"\";\r\n                var appendstring = \"\";\n                for (var i = 0; i < data.length; i++) {\r\n                    \r\n                    imagepath += data[i].UploadPath + \"|\";\r\n                    appendstring += \"<li><a href=\\\"javascript:void(0);\\\" [(click)]=\\\"changeImage(\" + data[i].UploadPath + \")\\\"><img src=\\\"\" + data[i].UploadPath + \"\\\" alt=\\\"accessory image\\\"></a></li>\"\r\n                   // this.listimages.push(data[i].UploadPath);\r\n                }\n                jQuery('#hdImage').val(imagepath);\r\n                jQuery('#imagecontainer').html('');\n                jQuery('#imagecontainer').html(appendstring);\n                this.data.Image = imagepath;\r\n            },\r\n            error: function () {\r\n                alert(\"There was error uploading files!\");\r\n            }\r\n        });\r\n\n    }\r\n    changeImage(path: string) {\r\n        alert(path);\r\n    }\r\n    onSubmit(data: any) {\r\n        console.log(data);\r\n        var newData = new Accessory(\"\", data.isactive, data.buyercode, data.acctype, data.acccategory, data.description, data.brand, data.department, data.division, data.itemsize, data.supplier, data.suppliercode, jQuery('#hdImage').val(),data.color,data.remark,data.productname,[],\"\")\r\n        this.accessoriesService.add(newData).subscribe((data) => {\r\n                if (data.error == null) {\r\n                    this.data = data;\r\n                    alert(\"Added successfully!\");\r\n                    this.router.navigate([\"/accessories\"]);\r\n                }\r\n                else {\r\n                    // update failure\r\n                    this.errorMessage = data.error;\r\n                    alert(this.errorMessage);\r\n                }\r\n            },\r\n                (error) => {\r\n                    this.errorMessage = error;\r\n\r\n                }\r\n            );\r\n       \r\n    }\r\n\r\n   \r\n\r\n   \r\n}"]}