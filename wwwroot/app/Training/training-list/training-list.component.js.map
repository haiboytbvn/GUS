{"version":3,"sources":["Training/training-list/training-list.component.ts"],"names":["TrainingListComponent","trainingService","authService","router","fb","acctypeService","brandService","trainingItemService","this","title","pagesizearr","isFormValuesChanged","prototype","ngOnInit","_this","isLoggedIn","navigate","paging","pagination_model_1","PaginationModel","searchModel","generalsearch_model_1","GeneralSearchModel","getTrainingList","subscribe","items","ACdata","error","errorMessage","getBrandList","brands","Data","trainingAddForm","group","id","name","forms_1","Validators","required","age","isactive","data","training_model_1","Training","itemid","changePage","i","Paging","PageNumber","changeSize","PageSize","onSubmit","console","log","training","add","alert","jQuery","val","prop","modal","onAdd","getTrainingItemList","trainingitems","onUpdate","update","onEdit","get","isFormChanged","value","Id","oldData","isFormDataChanged","JSON","stringify","__decorate","core_1","Component","selector","templateUrl","providers","training_service_1","TrainingService","FormBuilder","brand_service_1","BrandService","trainingitem_service_1","TrainingItemService","exports_1"],"mappings":"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","file":"training-list.component.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from \"@angular/core\";\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\r\nimport { TrainingService } from \"../shared/training.service\";\r\nimport { Training } from \"../shared/training.model\";\r\nimport { PaginationModel } from \"../../Pagination/shared/pagination.model\";\r\nimport { GeneralSearchModel } from \"../../Pagination/shared/generalsearch.model\";\r\nimport { TrainingListModel } from \"../shared/training-list.model\";\r\nimport { Router } from \"@angular/router\";\r\nimport { AuthService } from \"../../auth.service\";\r\nimport { SearchGeneralFilter } from \"../../SearchGeneralFilter/shared/searchGeneralFilter.model\";\r\nimport { Brand } from \"../../Brand/shared/brand.model\";\r\nimport { BrandService } from \"../../Brand/shared/brand.service\";\r\nimport { TrainingItem } from \"../../TrainingItem/shared/trainingitem.model\";\r\nimport { TrainingItemService } from \"../../TrainingItem/shared/trainingitem.service\";\r\ndeclare var jQuery: any;\r\n\r\n@Component({\r\n    selector: 'training',\r\n    templateUrl: 'app/Training/training-list/training-list.component.html',\r\n    providers: [TrainingService, FormBuilder, BrandService, TrainingItemService]\r\n})\r\n\r\nexport class TrainingListComponent {\r\n    data: Training;\r\n    title = \"Training\";\r\n    selectedData: Training;\r\n    errorMessage: string;\r\n    searchModel: GeneralSearchModel;\r\n    paging: PaginationModel;\r\n    trainingAddForm: FormGroup;\r\n    accessorycategories: Training[];\r\n    ACdata: TrainingListModel;\r\n    pagesizearr: number[] = [10, 20, 30, 0];\r\n    types: Training[];\r\n    itemid: string;\r\n    isFormValuesChanged = false;\r\n    trainingEditForm: FormGroup;\r\n    brands: Brand[];\r\n    trainingitems: TrainingItem[];\r\n\r\n    constructor(\r\n        private trainingService: TrainingService,\r\n        private authService: AuthService,\r\n        private router: Router,\r\n        private fb: FormBuilder,\r\n        private acctypeService: TrainingService,\r\n        private brandService: BrandService,\r\n        private trainingItemService: TrainingItemService\r\n    ) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (!this.authService.isLoggedIn()) {\r\n            this.router.navigate([\"\"]);\r\n        }\r\n        this.paging = new PaginationModel(10, 1, \"Name\", 0, [], 0);\r\n        this.searchModel = new GeneralSearchModel(\"\", \"\", \"\", \"\", this.paging);\r\n        this.trainingService.getTrainingList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n        this.brandService.getBrandList(this.searchModel).subscribe(items => this.brands = items.Data, error => this.errorMessage = <any>error);\r\n        this.trainingAddForm = this.fb.group(\r\n            {\r\n                id: [\"\"],\r\n                name: [\"\", [Validators.required]],\r\n                age: [\"\", [Validators.required]],\r\n                isactive: [true]\r\n            }\r\n        );\r\n        this.data = new Training(\"\", false, \"\", \"\");\r\n        this.itemid = \"\";\r\n    }\r\n    changePage(i: number) {\r\n        this.searchModel.Paging.PageNumber = i;\r\n        this.trainingService.getTrainingList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n    }\r\n\r\n    changeSize(i: number) {\r\n        if (i == 0) {\r\n            this.searchModel.Paging.PageNumber = 0;\r\n        } else {\r\n            this.searchModel.Paging.PageSize = i;\r\n            this.searchModel.Paging.PageNumber = 1;\r\n        }\r\n\r\n        this.trainingService.getTrainingList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n    }\r\n\r\n    onSubmit(data: any) {\r\n        console.log(data);\r\n        var training = new Training(\"\", data.isactive, data.name, data.age);\r\n        this.trainingService.add(training).subscribe((data) => {\r\n            if (data.error == null) {\r\n\r\n\r\n                this.trainingService.getTrainingList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n                alert(\"added successfully\");\r\n                this.data = new Training(\"\", false, \"\", \"\");\r\n                jQuery('#txtName').val('');\r\n                jQuery('#ckIsActive').prop('checked', true);\r\n            } else {\r\n                // update failure\r\n                this.errorMessage = data.error;\r\n                alert(this.errorMessage);\r\n            }\r\n        },\r\n            (error) => {\r\n                this.errorMessage = error;\r\n                alert(this.errorMessage);\r\n            }\r\n        );\r\n        jQuery('#myModalAdd').modal('hide');\r\n\r\n\r\n\r\n    }\r\n    onAdd() {\r\n        jQuery('#txtName').val('');\r\n        jQuery('#ckIsActive').prop('checked', true);\r\n        this.trainingItemService.getTrainingItemList(this.searchModel).subscribe(items => this.trainingitems = items.Data, error => this.errorMessage = <any>error);\r\n    }\r\n    onUpdate(data: any) {\r\n        // else, update it\r\n        // var training = new Training(data.id, null, null, data.isactive, data.name, false, data.buyercode, data.acctype);\r\n        console.log(data);\r\n        this.trainingService.update(data).subscribe((data) => {\r\n            if (data.error == null) {\r\n                this.data = data;\r\n                this.trainingService.getTrainingList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n                alert(\"updated successfully\");\r\n                jQuery('#myModalEdit').modal('hide');\r\n                this.itemid == \"\";\r\n            }\r\n            else {\r\n                // update failure\r\n                this.errorMessage = data.error;\r\n                alert(this.errorMessage);\r\n            }\r\n        },\r\n            (error) => {\r\n                this.errorMessage = error;\r\n                alert(this.errorMessage);\r\n            }\r\n        );\r\n    }\r\n    onEdit(id: string) {\r\n        this.itemid = id;\r\n        if (id !== \"\") {\r\n            this.trainingService.get(id).subscribe((data) => {\r\n                this.data = data;\r\n            });\r\n            this.trainingItemService.getTrainingItemList(this.searchModel).subscribe(items => this.trainingitems = items.Data, error => this.errorMessage = <any>error);\r\n\r\n        }\r\n    }\r\n    isFormChanged(value) {\r\n        this.trainingService.get(this.data.Id).subscribe((oldData) => {\r\n            this.isFormDataChanged(oldData);\r\n        });\r\n    }\r\n\r\n    isFormDataChanged(oldData: Training) {\r\n        if (JSON.stringify(this.data) === JSON.stringify(oldData))\r\n            this.isFormValuesChanged = false;\r\n        else\r\n            this.isFormValuesChanged = true;\r\n    }\r\n}"]}