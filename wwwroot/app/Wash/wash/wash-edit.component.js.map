{"version":3,"sources":["Wash/wash/wash-edit.component.ts"],"names":["WashEditComponent","fb","washService","categoryService","productnameService","acctypeService","brandService","deptService","divisionService","colorService","router","authService","activatedRoute","this","title","errorMessage","isDelete","isFormValuesChanged","prototype","changeType","id","_this","getWashCateogryListByType","subscribe","items","categories","error","changeCategory","disableProductName","getWashProductNameByCategory","productnames","fileChangeEvent","fileUpload","jQuery","get","files","data","FormData","i","length","append","name","ajax","type","url","contentType","processData","success","prop","UploadPath","mainimage","imagepath","appendstring","val","html","Image","alert","ngOnInit","isLoggedIn","navigate","snapshot","params","paging","pagination_model_1","PaginationModel","searchModel","generalsearch_model_1","GeneralSearchModel","pageall","getAll","getWashCategoryList","Data","getWashProductNameList","getWashTypeList","types","getBrandList","brands","getDepartmentList","departments","getDivisionList","divisions","getColorList","colors","iseditting","buttonvalue","onUpdate","update","isFormChanged","value","Id","oldData","isFormDataChanged","changeImage","path","console","log","JSON","stringify","__decorate","core_1","Component","selector","templateUrl","providers","wash_service_1","WashService","forms_1","FormBuilder","washcategory_service_1","WashCategoryService","washproductname_service_1","WashProductNameService","brand_service_1","BrandService","washtype_service_1","WashTypeService","department_service_1","DepartmentService","division_service_1","DivisionService","color_service_1","ColorService","exports_1"],"mappings":"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","file":"wash-edit.component.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from \"@angular/core\";\nimport { FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { Wash } from \"../../Wash/shared/wash.model\";\nimport { WashService } from \"../../Wash/shared/wash.service\";\n\nimport { WashCategory } from \"../../WashCategory/shared/washcategory.model\";\nimport { WashCategoryService } from \"../../WashCategory/shared/washcategory.service\";\n\nimport { WashProductName } from \"../../WashProductName/shared/washproductname.model\";\nimport { WashProductNameService } from \"../../WashProductName/shared/washproductname.service\";\n\r\nimport { Color } from \"../../Color/shared/color.model\";\r\nimport { ColorService } from \"../../Color/shared/color.service\";\r\nimport { ColorSearchModel } from \"../../Color/shared/color-search.model\";\r\n\r\nimport { WashType } from \"../../WashType/shared/washtype.model\";\r\nimport { WashTypeService } from \"../../WashType/shared/washtype.service\";\r\n\r\n\r\nimport { Department } from \"../../Department/shared/department.model\";\nimport { DepartmentService } from \"../../Department/shared/department.service\";\nimport { Division } from \"../../Division/shared/division.model\";\nimport { DivisionService } from \"../../Division/shared/division.service\";\nimport { Brand } from \"../../Brand/shared/brand.model\";\nimport { BrandService } from \"../../Brand/shared/brand.service\";\nimport { AuthService } from \"../../auth.service\";\nimport { SearchGeneralFilter } from \"../../SearchGeneralFilter/shared/searchGeneralFilter.model\";\nimport { GeneralSearchModel } from \"../../Pagination/shared/generalsearch.model\";\r\nimport { PaginationModel } from \"../../Pagination/shared/pagination.model\";\ndeclare var jQuery: any;\n\n@Component({\n    selector: \"wash-edit\",\n    templateUrl: \"app/Wash/wash/wash-edit.component.html\",\n    providers: [WashService, FormBuilder, WashCategoryService, WashProductNameService, BrandService, WashTypeService, DepartmentService, DivisionService, ColorService]\n})\n\nexport class WashEditComponent {\n    data: Wash;\n    title = \"Edit Wash\";\n    washForm: FormGroup;\n    errorMessage = null;\n    isDelete = false;\n    isFormValuesChanged = false;\n    oldData: Wash;\n    categories: WashCategory[];\n    productnames: WashProductName[];\n    types: WashType[];\r\n    brands: Brand[];\r\n    departments: Department[];\r\n    divisions: Division[];\r\n\r\n    colors: Color[];\n    searchModel: GeneralSearchModel;\r\n    paging: PaginationModel;\n    iseditting: boolean;\n    buttonvalue: string;\n    disableProductName: boolean;\r\n    disableCategory: boolean;\n    constructor(\n        private fb: FormBuilder,\n        private washService: WashService,\n        private categoryService: WashCategoryService,\n        private productnameService: WashProductNameService,\n        private acctypeService: WashTypeService,\r\n        private brandService: BrandService,\r\n        private deptService: DepartmentService,\r\n        private divisionService: DivisionService,\r\n        private colorService: ColorService,\n        private router: Router,\n        private authService: AuthService,\n        private activatedRoute: ActivatedRoute) {\n    }\n    changeType(id: string) {\n        this.categoryService.getWashCateogryListByType(id).subscribe(items => this.categories = items, error => this.errorMessage = <any>error);\n    }\n    changeCategory(id: string) {\n        if (id === \"\") {\r\n\r\n            this.disableProductName = true;\r\n        } else {\r\n            this.disableProductName = false;\r\n            this.productnameService.getWashProductNameByCategory(id).subscribe(items => this.productnames = items, error => this.errorMessage = <any>error);\r\n        }\n\n    }\n    fileChangeEvent() {\n\n        var fileUpload = jQuery(\"#files\").get(0);\r\n        var files = fileUpload.files;\r\n        var data = new FormData();\r\n        for (var i = 0; i < files.length; i++) {\r\n            data.append(files[i].name, files[i]);\r\n        }\r\n        jQuery.ajax({\r\n            type: \"POST\",\r\n            url: \"api/wash/UploadImage\",\r\n            contentType: false,\r\n            processData: false,\r\n            data: data,\r\n            success: function (data) {\r\n                jQuery('#imgPreview').prop(\"src\", data[0].UploadPath);\r\n                this.mainimage = data[0].UploadPath;\r\n                var imagepath = \"\";\r\n                var appendstring = \"\";\n                for (var i = 0; i < data.length; i++) {\r\n\r\n                    imagepath += data[i].UploadPath + \"|\";\r\n                    appendstring += \"<li><a href=\\\"javascript:void(0);\\\" [(click)]=\\\"changeImage(\" + data[i].UploadPath + \")\\\"><img src=\\\"\" + data[i].UploadPath + \"\\\" alt=\\\"wash image\\\"></a></li>\"\r\n                    // this.listimages.push(data[i].UploadPath);\r\n                }\n                jQuery('#hdImage').val(imagepath);\r\n                jQuery('#imagecontainer').html('');\n                jQuery('#imagecontainer').html(appendstring);\n                this.data.Image = imagepath;\r\n            },\r\n            error: function () {\r\n                alert(\"There was error uploading files!\");\r\n            }\r\n        });\r\n\n    }\n    ngOnInit() {\n        if (!this.authService.isLoggedIn()) {\r\n            this.router.navigate([\"\"]);\r\n        }\n\n        var id = this.activatedRoute.snapshot.params[\"id\"];\n        if (id) {\n            this.washService.get(id).subscribe((data) => {\n                this.data = data;\n            });\n        }\n        else {\n            this.router.navigate([\"wash/add\"]);\n        }\n        this.paging = new PaginationModel(10, 1, \"Name\", 0, [], 0);\r\n        this.searchModel = new GeneralSearchModel(\"\", \"\", \"\", \"\", this.paging);\r\n        var pageall = new PaginationModel(10, 0, \"Name\", 0, [], 0);\r\n        var getAll = new GeneralSearchModel(\"\", \"\", \"\", \"\", pageall);\r\n        this.categoryService.getWashCategoryList(getAll).subscribe(items => this.categories = items.Data, error => this.errorMessage = <any>error);\r\n        this.productnameService.getWashProductNameList(getAll).subscribe(items => this.productnames = items.Data, error => this.errorMessage = <any>error);\r\n        this.acctypeService.getWashTypeList(getAll).subscribe(items => this.types = items.Data, error => this.errorMessage = <any>error);\r\n        this.brandService.getBrandList(getAll).subscribe(items => this.brands = items.Data, error => this.errorMessage = <any>error);\r\n        this.deptService.getDepartmentList(getAll).subscribe(items => this.departments = items.Data, error => this.errorMessage = <any>error);\r\n        this.divisionService.getDivisionList(getAll).subscribe(items => this.divisions = items.Data, error => this.errorMessage = <any>error);\r\n        this.colorService.getColorList(getAll).subscribe(items => this.colors = items.Data, error => this.errorMessage = <any>error);\r\n        this.title = \"Edit Wash\";\n        this.iseditting = false;\n        this.buttonvalue = \"Edit\";\n    }\n\n    onUpdate(data: Wash) {\n\n        if (this.iseditting) {\n            data.Image = jQuery('#hdImagepath').val();\n            this.washService.update(data).subscribe((data) => {\n                if (data.error == null) {\n                    this.data = data;\n                    alert('Wash details updated successfully');\n                    this.router.navigate([\"/wash\"]);\n\n                } else {\n                    // update failure\n                    this.errorMessage = data.error;\n                    alert(this.errorMessage);\n                }\n            },\n                (error) => {\n                    this.errorMessage = error;\n\n                }\n            );\n        } else {\n            this.buttonvalue = \"Save\";\n            this.iseditting = true;\n        }\n    }\n\n    isFormChanged(value) {\n        this.washService.get(this.data.Id).subscribe((oldData) => {\n            this.isFormDataChanged(oldData);\n        });\n    }\n    changeImage(path: string) {\n        jQuery('#imgPreview').prop(\"src\", path);\n    }\n    isFormDataChanged(oldData: Wash) {\n        console.log(this.data);\n        console.log(oldData);\n        if (JSON.stringify(this.data) === JSON.stringify(oldData))\n            this.isFormValuesChanged = false;\n        else\n            this.isFormValuesChanged = true;\n    }\n}"]}