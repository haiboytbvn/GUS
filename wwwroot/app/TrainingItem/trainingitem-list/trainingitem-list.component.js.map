{"version":3,"sources":["TrainingItem/trainingitem-list/trainingitem-list.component.ts"],"names":["TrainingItemListComponent","trainingitemService","authService","router","fb","acctypeService","this","title","pagesizearr","isFormValuesChanged","prototype","ngOnInit","_this","isLoggedIn","navigate","paging","pagination_model_1","PaginationModel","searchModel","generalsearch_model_1","GeneralSearchModel","getTrainingItemList","subscribe","items","ACdata","error","errorMessage","trainingitemAddForm","group","id","value","forms_1","Validators","required","isactive","data","trainingitem_model_1","TrainingItem","itemid","changePage","i","Paging","PageNumber","changeSize","PageSize","onSubmit","console","log","trainingitem","add","alert","jQuery","val","prop","modal","onAdd","onUpdate","update","onEdit","get","isFormChanged","Id","oldData","isFormDataChanged","JSON","stringify","__decorate","core_1","Component","selector","templateUrl","providers","trainingitem_service_1","TrainingItemService","FormBuilder","exports_1"],"mappings":"yjDAkBAA,0BAAA,WAeI,QAAAA,2BAAoBC,oBACRC,YACAC,OACAC,GACAC,gBAJQC,KAAAL,oBAAAA,oBACRK,KAAAJ,YAAAA,YACAI,KAAAH,OAAAA,OACAG,KAAAF,GAAAA,GACAE,KAAAD,eAAAA,eAjBZC,KAAAC,MAAQ,eAQRD,KAAAE,aAAyB,GAAI,GAAI,GAAI,GAGrCF,KAAAG,qBAAsB,EAwH1B,MA9GIT,2BAAAU,UAAAC,SAAA,WAAA,GAAAC,OAAAN,IACSA,MAAKJ,YAAYW,cAClBP,KAAKH,OAAOW,UAAU,KAE1BR,KAAKS,OAAS,GAAIC,oBAAAC,gBAAgB,GAAI,EAAG,OAAQ,KAAO,GACxDX,KAAKY,YAAc,GAAIC,uBAAAC,mBAAmB,GAAI,GAAI,GAAI,GAAId,KAAKS,QAC/DT,KAAKL,oBAAoBoB,oBAAoBf,KAAKY,aAAaI,UAAU,SAAAC,OAAS,MAAAX,OAAKY,OAASD,OAAO,SAAAE,OAAS,MAAAb,OAAKc,aAAoBD,QACzInB,KAAKqB,oBAAsBrB,KAAKF,GAAGwB,OAE3BC,IAAK,IACLC,OAAQ,IAAKC,QAAAC,WAAWC,WACxBC,WAAW,KAGnB5B,KAAK6B,KAAO,GAAIC,sBAAAC,aAAa,IAAI,EAAO,GAAI,KAAM,MAClD/B,KAAKgC,OAAS,IAElBtC,0BAAAU,UAAA6B,WAAA,SAAWC,GAAX,GAAA5B,OAAAN,IACIA,MAAKY,YAAYuB,OAAOC,WAAaF,EACrClC,KAAKL,oBAAoBoB,oBAAoBf,KAAKY,aAAaI,UAAU,SAAAC,OAAS,MAAAX,OAAKY,OAASD,OAAO,SAAAE,OAAS,MAAAb,OAAKc,aAAoBD,SAG7IzB,0BAAAU,UAAAiC,WAAA,SAAWH,GAAX,GAAA5B,OAAAN,IACa,IAALkC,EACAlC,KAAKY,YAAYuB,OAAOC,WAAa,GAErCpC,KAAKY,YAAYuB,OAAOG,SAAWJ,EACnClC,KAAKY,YAAYuB,OAAOC,WAAa,GAGzCpC,KAAKL,oBAAoBoB,oBAAoBf,KAAKY,aAAaI,UAAU,SAAAC,OAAS,MAAAX,OAAKY,OAASD,OAAO,SAAAE,OAAS,MAAAb,OAAKc,aAAoBD,SAG7IzB,0BAAAU,UAAAmC,SAAA,SAASV,MAAT,GAAAvB,OAAAN,IACIwC,SAAQC,IAAIZ,KACZ,IAAIa,cAAe,GAAIZ,sBAAAC,aAAa,GAAIF,KAAKD,SAAUC,KAAKL,MAAO,KAAM,KACzExB,MAAKL,oBAAoBgD,IAAID,cAAc1B,UAAU,SAACa,MAChC,MAAdA,KAAKV,OAGLb,MAAKX,oBAAoBoB,oBAAoBT,MAAKM,aAAaI,UAAU,SAAAC,OAAS,MAAAX,OAAKY,OAASD,OAAO,SAAAE,OAAS,MAAAb,OAAKc,aAAoBD,QACzIyB,MAAM,sBACNtC,MAAKuB,KAAO,GAAIC,sBAAAC,aAAa,IAAI,EAAO,GAAI,KAAK,MACjDc,OAAO,YAAYC,IAAI,IACvBD,OAAO,eAAeE,KAAK,WAAW,KAGtCzC,MAAKc,aAAeS,KAAKV,MACzByB,MAAMtC,MAAKc,gBAGf,SAACD,OACGb,MAAKc,aAAeD,MACpByB,MAAMtC,MAAKc,gBAGnByB,OAAO,eAAeG,MAAM,SAKhCtD,0BAAAU,UAAA6C,MAAA,WACIJ,OAAO,YAAYC,IAAI,IACvBD,OAAO,eAAeE,KAAK,WAAW,IAE1CrD,0BAAAU,UAAA8C,SAAA,SAASrB,MAAT,GAAAvB,OAAAN,IAGIwC,SAAQC,IAAIZ,MACZ7B,KAAKL,oBAAoBwD,OAAOtB,MAAMb,UAAU,SAACa,MAC3B,MAAdA,KAAKV,OACLb,MAAKuB,KAAOA,KACZvB,MAAKX,oBAAoBoB,oBAAoBT,MAAKM,aAAaI,UAAU,SAAAC,OAAS,MAAAX,OAAKY,OAASD,OAAO,SAAAE,OAAS,MAAAb,OAAKc,aAAoBD,QACzIyB,MAAM,wBACNC,OAAO,gBAAgBG,MAAM,QAC7B1C,MAAK0B,SAIL1B,MAAKc,aAAeS,KAAKV,MACzByB,MAAMtC,MAAKc,gBAGf,SAACD,OACGb,MAAKc,aAAeD,MACpByB,MAAMtC,MAAKc,iBAIvB1B,0BAAAU,UAAAgD,OAAA,SAAO7B,IAAP,GAAAjB,OAAAN,IACIA,MAAKgC,OAAST,GACH,KAAPA,IACAvB,KAAKL,oBAAoB0D,IAAI9B,IAAIP,UAAU,SAACa,MACxCW,QAAQC,IAAIZ,MACZvB,MAAKuB,KAAOA,QAIxBnC,0BAAAU,UAAAkD,cAAA,SAAc9B,OAAd,GAAAlB,OAAAN,IACIA,MAAKL,oBAAoB0D,IAAIrD,KAAK6B,KAAK0B,IAAIvC,UAAU,SAACwC,SAClDlD,MAAKmD,kBAAkBD,YAI/B9D,0BAAAU,UAAAqD,kBAAA,SAAkBD,SACVE,KAAKC,UAAU3D,KAAK6B,QAAU6B,KAAKC,UAAUH,SAC7CxD,KAAKG,qBAAsB,EAE3BH,KAAKG,qBAAsB,GAzIvCT,0BAAAkE,YAACC,OAAAC,WACGC,SAAU,eACVC,YAAa,sEACbC,WAAYC,uBAAAC,oBAAqB1C,QAAA2C,qOAGrCC,UAAA,4BAAA3E","file":"trainingitem-list.component.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from \"@angular/core\";\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\r\nimport { TrainingItemService } from \"../shared/trainingitem.service\";\r\nimport { TrainingItem } from \"../shared/trainingitem.model\";\r\nimport { PaginationModel } from \"../../Pagination/shared/pagination.model\";\r\nimport { GeneralSearchModel } from \"../../Pagination/shared/generalsearch.model\";\r\nimport { TrainingItemListModel } from \"../shared/trainingitem-list.model\";\r\nimport { Router } from \"@angular/router\";\r\nimport { AuthService } from \"../../auth.service\";\r\nimport { SearchGeneralFilter } from \"../../SearchGeneralFilter/shared/searchGeneralFilter.model\";\r\ndeclare var jQuery: any;\r\n\r\n@Component({\r\n    selector: 'trainingitem',\r\n    templateUrl: 'app/TrainingItem/trainingitem-list/trainingitem-list.component.html',\r\n    providers: [TrainingItemService, FormBuilder]\r\n})\r\n\r\nexport class TrainingItemListComponent {\r\n    data: TrainingItem;\r\n    title = \"TrainingItem\";\r\n    selectedData: TrainingItem;\r\n    errorMessage: string;\r\n    searchModel: GeneralSearchModel;\r\n    paging: PaginationModel;\r\n    trainingitemAddForm: FormGroup;\r\n    accessorycategories: TrainingItem[];\r\n    ACdata: TrainingItemListModel;\r\n    pagesizearr: number[] = [10, 20, 30, 0];\r\n    types: TrainingItem[];\r\n    itemid: string;\r\n    isFormValuesChanged = false;\r\n    trainingitemEditForm: FormGroup;\r\n    constructor(private trainingitemService: TrainingItemService,\r\n        private authService: AuthService,\r\n        private router: Router,\r\n        private fb: FormBuilder,\r\n        private acctypeService: TrainingItemService\r\n    ) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (!this.authService.isLoggedIn()) {\r\n            this.router.navigate([\"\"]);\r\n        }\r\n        this.paging = new PaginationModel(10, 1, \"Name\", 0, [], 0);\r\n        this.searchModel = new GeneralSearchModel(\"\", \"\", \"\", \"\", this.paging);\r\n        this.trainingitemService.getTrainingItemList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n        this.trainingitemAddForm = this.fb.group(\r\n            {\r\n                id: [\"\"],\r\n                value: [\"\", [Validators.required]],\r\n                isactive: [true]\r\n            }\r\n        );\r\n        this.data = new TrainingItem(\"\", false, \"\", null, null);\r\n        this.itemid = \"\";\r\n    }\r\n    changePage(i: number) {\r\n        this.searchModel.Paging.PageNumber = i;\r\n        this.trainingitemService.getTrainingItemList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n    }\r\n\r\n    changeSize(i: number) {\r\n        if (i == 0) {\r\n            this.searchModel.Paging.PageNumber = 0;\r\n        } else {\r\n            this.searchModel.Paging.PageSize = i;\r\n            this.searchModel.Paging.PageNumber = 1;\r\n        }\r\n\r\n        this.trainingitemService.getTrainingItemList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n    }\r\n\r\n    onSubmit(data: any) {\r\n        console.log(data);\r\n        var trainingitem = new TrainingItem(\"\", data.isactive, data.value, null, null);\r\n        this.trainingitemService.add(trainingitem).subscribe((data) => {\r\n            if (data.error == null) {\r\n\r\n\r\n                this.trainingitemService.getTrainingItemList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n                alert(\"added successfully\");\r\n                this.data = new TrainingItem(\"\", false, \"\", null,null);\r\n                jQuery('#txtName').val('');\r\n                jQuery('#ckIsActive').prop('checked', true);\r\n            } else {\r\n                // update failure\r\n                this.errorMessage = data.error;\r\n                alert(this.errorMessage);\r\n            }\r\n        },\r\n            (error) => {\r\n                this.errorMessage = error;\r\n                alert(this.errorMessage);\r\n            }\r\n        );\r\n        jQuery('#myModalAdd').modal('hide');\r\n\r\n\r\n\r\n    }\r\n    onAdd() {\r\n        jQuery('#txtName').val('');\r\n        jQuery('#ckIsActive').prop('checked', true);\r\n    }\r\n    onUpdate(data: any) {\r\n        // else, update it\r\n        // var trainingitem = new trainingitem(data.id, null, null, data.isactive, data.name, false, data.buyercode, data.acctype);\r\n        console.log(data);\r\n        this.trainingitemService.update(data).subscribe((data) => {\r\n            if (data.error == null) {\r\n                this.data = data;\r\n                this.trainingitemService.getTrainingItemList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n                alert(\"updated successfully\");\r\n                jQuery('#myModalEdit').modal('hide');\r\n                this.itemid == \"\";\r\n            }\r\n            else {\r\n                // update failure\r\n                this.errorMessage = data.error;\r\n                alert(this.errorMessage);\r\n            }\r\n        },\r\n            (error) => {\r\n                this.errorMessage = error;\r\n                alert(this.errorMessage);\r\n            }\r\n        );\r\n    }\r\n    onEdit(id: string) {\r\n        this.itemid = id;\r\n        if (id !== \"\") {\r\n            this.trainingitemService.get(id).subscribe((data) => {\r\n                console.log(data);\r\n                this.data = data;\r\n            });\r\n        }\r\n    }\r\n    isFormChanged(value) {\r\n        this.trainingitemService.get(this.data.Id).subscribe((oldData) => {\r\n            this.isFormDataChanged(oldData);\r\n        });\r\n    }\r\n\r\n    isFormDataChanged(oldData: TrainingItem) {\r\n        if (JSON.stringify(this.data) === JSON.stringify(oldData))\r\n            this.isFormValuesChanged = false;\r\n        else\r\n            this.isFormValuesChanged = true;\r\n    }\r\n}"]}