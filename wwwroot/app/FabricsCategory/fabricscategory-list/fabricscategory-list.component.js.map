{"version":3,"sources":["FabricsCategory/fabricscategory-list/fabricscategory-list.component.ts"],"names":["FabricsCategoryListComponent","fabricscategoryService","authService","router","fb","fabricstypeService","this","title","pagesizearr","isFormValuesChanged","prototype","ngOnInit","_this","isLoggedIn","navigate","paging","pagination_model_1","PaginationModel","searchModel","generalsearch_model_1","GeneralSearchModel","getFabricsCategoryList","subscribe","items","ACdata","error","errorMessage","fabricscategoryAddForm","group","name","forms_1","Validators","required","isactive","acctype","pageall","getAll","getFabricsTypeList","types","data","fabricscategory_model_1","FabricsCategory","itemid","changePage","i","Paging","PageNumber","changeSize","PageSize","onSubmit","fabricscategory","add","alert","jQuery","val","prop","modal","onAdd","onUpdate","console","log","update","onEdit","id","get","isFormChanged","value","Id","oldData","isFormDataChanged","JSON","stringify","__decorate","core_1","Component","selector","templateUrl","providers","fabricscategory_service_1","FabricsCategoryService","fabricstype_service_1","FabricsTypeService","FormBuilder","exports_1"],"mappings":"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","file":"fabricscategory-list.component.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from \"@angular/core\";\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\r\nimport { FabricsCategoryService } from \"../shared/fabricscategory.service\";\r\nimport { FabricsCategory } from \"../shared/fabricscategory.model\";\r\nimport { PaginationModel } from \"../../Pagination/shared/pagination.model\";\r\nimport { FabricsCategoryListModel } from \"../shared/fabricscategory-list.model\";\r\nimport { Router } from \"@angular/router\";\r\nimport { AuthService } from \"../../auth.service\";\r\nimport { FabricsTypeService } from \"../../FabricsType/shared/fabricstype.service\";\r\nimport { FabricsType } from \"../../FabricsType/shared/fabricstype.model\";\r\nimport { FabricsTypeListModel } from \"../../FabricsType/shared/fabricstype-list.model\";\r\nimport { SearchGeneralFilter } from \"../../SearchGeneralFilter/shared/searchGeneralFilter.model\";\r\nimport { GeneralSearchModel } from \"../../Pagination/shared/generalsearch.model\";\r\ndeclare var jQuery: any;\r\n\r\n@Component({\r\n    selector: 'fabricscategory',\r\n    templateUrl: 'app/FabricsCategory/fabricscategory-list/fabricscategory-list.component.html',\r\n    providers: [FabricsCategoryService, FabricsTypeService, FormBuilder]\r\n})\r\n\r\nexport class FabricsCategoryListComponent {\r\n    data: FabricsCategory;\r\n    title = \"Fabrics Category\";\r\n    selectedData: FabricsCategory;\r\n    errorMessage: string;\r\n    searchModel: GeneralSearchModel;\r\n    paging: PaginationModel;\r\n    fabricscategoryAddForm: FormGroup;\r\n    accessorycategories: FabricsCategory[];\r\n    ACdata: FabricsCategoryListModel;\r\n    pagesizearr: number[] = [10, 20, 30, 0];\r\n    types: FabricsTypeListModel;\r\n    itemid: string;\r\n    isFormValuesChanged = false;\r\n    fabricscategoryEditForm: FormGroup;\r\n    constructor(private fabricscategoryService: FabricsCategoryService,\r\n        private authService: AuthService,\r\n        private router: Router,\r\n        private fb: FormBuilder,\r\n        private fabricstypeService: FabricsTypeService\r\n    ) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (!this.authService.isLoggedIn()) {\r\n            this.router.navigate([\"\"]);\r\n        }\r\n        this.paging = new PaginationModel(10, 1, \"Name\", 0, [], 0);\r\n        this.searchModel = new GeneralSearchModel(\"\", \"\", \"\", \"\", this.paging);\r\n        this.fabricscategoryService.getFabricsCategoryList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n        this.fabricscategoryAddForm = this.fb.group(\r\n            {\r\n                name: [\"\", [Validators.required]],\r\n                isactive: [true],\r\n                acctype: [\"\", [Validators.required]]\r\n            }\r\n        );\r\n\r\n        var pageall = new PaginationModel(10, 0, \"Name\", 0, [], 0);\r\n        var getAll = new GeneralSearchModel(\"\", \"\", \"\", \"\", pageall);\r\n        this.fabricstypeService.getFabricsTypeList(getAll).subscribe(items => this.types = items, error => this.errorMessage = <any>error);\r\n        this.data = new FabricsCategory(\"\", false, \"\", \"\");\r\n        this.itemid = \"\";\r\n    }\r\n    changePage(i: number) {\r\n        this.searchModel.Paging.PageNumber = i;\r\n        this.fabricscategoryService.getFabricsCategoryList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n    }\r\n\r\n    changeSize(i: number) {\r\n        if (i == 0) {\r\n            this.searchModel.Paging.PageNumber = 0;\r\n        } else {\r\n            this.searchModel.Paging.PageSize = i;\r\n            this.searchModel.Paging.PageNumber = 1;\r\n        }\r\n\r\n        this.fabricscategoryService.getFabricsCategoryList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n    }\r\n\r\n\r\n\r\n    onSubmit(data: any) {\r\n\r\n        var fabricscategory = new FabricsCategory(\"\", data.isactive, data.name, data.acctype);\r\n        this.fabricscategoryService.add(fabricscategory).subscribe((data) => {\r\n            if (data.error == null) {\r\n\r\n\r\n                this.fabricscategoryService.getFabricsCategoryList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n                alert(\"added successfully\");\r\n                this.data = new FabricsCategory(\"\", false, \"\", \"\");\r\n                jQuery('#txtName').val('');\r\n                jQuery('#drType').val('');\r\n                jQuery('#ckIsActive').prop('checked', true);\r\n            } else {\r\n                // update failure\r\n                this.errorMessage = data.error;\r\n                alert(this.errorMessage);\r\n            }\r\n        },\r\n            (error) => {\r\n                this.errorMessage = error;\r\n                alert(this.errorMessage);\r\n            }\r\n        );\r\n        jQuery('#myModalAdd').modal('hide');\r\n\r\n\r\n\r\n    }\r\n    onAdd() {\r\n        jQuery('#txtName').val('');\r\n        jQuery('#drType').val('');\r\n        jQuery('#ckIsActive').prop('checked', true);\r\n    }\r\n    onUpdate(data: any) {\r\n        // else, update it\r\n        // var fabricscategory = new FabricsCategory(data.id, null, null, data.isactive, data.name, false, data.buyercode, data.acctype);\r\n        console.log(data);\r\n        this.fabricscategoryService.update(data).subscribe((data) => {\r\n            if (data.error == null) {\r\n                this.data = data;\r\n                this.fabricscategoryService.getFabricsCategoryList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n                alert(\"updated successfully\");\r\n                jQuery('#myModalEdit').modal('hide');\r\n                this.itemid == \"\";\r\n            }\r\n            else {\r\n                // update failure\r\n                this.errorMessage = data.error;\r\n                alert(this.errorMessage);\r\n            }\r\n        },\r\n            (error) => {\r\n                this.errorMessage = error;\r\n                alert(this.errorMessage);\r\n            }\r\n        );\r\n    }\r\n    onEdit(id: string) {\r\n        this.itemid = id;\r\n        if (id !== \"\") {\r\n            this.fabricscategoryService.get(id).subscribe((data) => {\r\n                this.data = data;\r\n            });\r\n        }\r\n    }\r\n    isFormChanged(value) {\r\n        this.fabricscategoryService.get(this.data.Id).subscribe((oldData) => {\r\n            this.isFormDataChanged(oldData);\r\n        });\r\n    }\r\n\r\n    isFormDataChanged(oldData: FabricsCategory) {\r\n        if (JSON.stringify(this.data) === JSON.stringify(oldData))\r\n            this.isFormValuesChanged = false;\r\n        else\r\n            this.isFormValuesChanged = true;\r\n    }\r\n}"]}