{"version":3,"sources":["Color/color/color-add.component.ts"],"names":["ColorAddComponent","fb","divisionService","deptServcie","brandService","colorService","router","authService","activatedRoute","this","errorMessage","prototype","fileChangeEvent","fileUpload","jQuery","get","files","data","FormData","i","length","append","name","ajax","type","url","contentType","processData","success","val","UploadPath","attr","Image","FileName","Size","error","alert","doUpload","trigger","ngOnInit","_this","isLoggedIn","navigate","colorForm","group","buyercode","forms_1","Validators","required","brand","department","division","isactive","remark","searchGeneralFilter_model_1","SearchGeneralFilter","paging","pagination_model_1","PaginationModel","searchModel","generalsearch_model_1","GeneralSearchModel","getBrandList","subscribe","item","brands","Data","getDepartmentList","depts","getDivisionList","items","divisions","color_model_1","Color","title","ngOnDestroy","onSubmit","newData","code","add","onBack","changeDivision","value","console","log","onUpdate","__decorate","core_1","ViewChild","Component","selector","templateUrl","providers","color_service_1","ColorService","FormBuilder","department_service_1","DepartmentService","brand_service_1","BrandService","division_service_1","DivisionService","exports_1"],"mappings":"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","file":"color-add.component.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit, OnDestroy } from \"@angular/core\";\nimport { FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { Color } from \"../../Color/shared/color.model\";\nimport { ColorService } from \"../../Color/shared/color.service\";\nimport { Department } from \"../../Department/shared/department.model\";\nimport { DepartmentService } from \"../../Department/shared/department.service\";\nimport { Division } from \"../../Division/shared/division.model\";\nimport { DivisionService } from \"../../Division/shared/division.service\";\nimport { Brand } from \"../../Brand/shared/brand.model\";\nimport { BrandService } from \"../../Brand/shared/brand.service\";\nimport { AuthService } from \"../../auth.service\";\nimport { SearchGeneralFilter } from \"../../SearchGeneralFilter/shared/searchGeneralFilter.model\";\nimport { GeneralSearchModel } from \"../../Pagination/shared/generalsearch.model\";\r\nimport { PaginationModel } from \"../../Pagination/shared/pagination.model\";\nimport { DivisionListModel } from \"../../Division/shared/division-list.model\";\ndeclare var jQuery: any;\n@Component({\n    selector: \"color-add\",\n    templateUrl: \"app/Color/color/color-add.component.html\",\n    providers: [ColorService, FormBuilder, DepartmentService, BrandService, DivisionService]\n})\n\nexport class ColorAddComponent {\n\n    data: Color;\n    title: string;\n    colorForm: FormGroup;\n    errorMessage = null;\n    @ViewChild('errorDiv') errorDiv: ElementRef;\n    depts: Department[];\n    brands: Brand[];\n    divisions: DivisionListModel;\n    searchModel: GeneralSearchModel;\r\n    paging: PaginationModel;\n    constructor(\n        private fb: FormBuilder,\n        private divisionService: DivisionService,\n        private deptServcie: DepartmentService,\n        private brandService: BrandService,\n        private colorService: ColorService,\n        private router: Router,\n        private authService: AuthService,\n        private activatedRoute: ActivatedRoute) {\n    }\n    fileChangeEvent() {\n\n        var fileUpload = jQuery(\"#files\").get(0);\r\n        var files = fileUpload.files;\r\n        var data = new FormData();\r\n        for (var i = 0; i < files.length; i++) {\r\n            data.append(files[i].name, files[i]);\r\n        }\r\n        jQuery.ajax({\r\n            type: \"POST\",\r\n            url: \"api/color/UploadImage\",\r\n            contentType: false,\r\n            processData: false,\r\n            data: data,\r\n            success: function (data) {\n                jQuery('#hdImage').val(data.UploadPath);\n                jQuery('#imgPreview').attr(\"src\", data.UploadPath);\n                this.data.Image = data.UploadPath;\n                jQuery('#lblinFo').append('File ' + data.FileName + ' size ' + data.Size + ' uploaded successfully');\r\n            },\r\n            error: function () {\r\n                alert(\"There was error uploading files!\");\r\n            }\r\n        });\r\n\n    }\n    doUpload() {\n        jQuery(\"#files\").trigger(\"click\");\n    }\n    ngOnInit() {\n        if (!this.authService.isLoggedIn()) {\r\n            this.router.navigate([\"\"]);\r\n        }\n\n        this.colorForm = this.fb.group(\n            {\n                buyercode: [\"\"],\n                name: [\"\", [\n                    Validators.required]],\n                brand: [\"\", [\n                    Validators.required]],\n                department: [\"\", [\n                    Validators.required]],\n                division: [\"\", [\n                    Validators.required]],\n                isactive: [true],\n                remark:[\"\"]\n            }\n        );\n\n        var searchGeneralFilter = new SearchGeneralFilter(\"\", \"\", \"\", \"\");\n        this.paging = new PaginationModel(10, 1, \"Name\", 0, [], 0);\r\n        this.searchModel = new GeneralSearchModel(\"\", \"\", \"\", \"\", this.paging);\n        this.brandService.getBrandList(this.searchModel).subscribe(item => this.brands = item.Data, error => this.errorMessage = <any>error);\n        this.deptServcie.getDepartmentList(this.searchModel).subscribe(item => this.depts = item.Data, error => this.errorMessage = <any>error);       \n        this.divisionService.getDivisionList(this.searchModel).subscribe(items => this.divisions = items.Data, error => this.errorMessage = <any>error);\n        this.data = new Color(\"\", false, \"\", \"\", \"\", \"\", \"\", \"\",\"\",\"\");\n        this.title = \"New Color\";\n    }\n   \n    ngOnDestroy() {\n        this.colorService.data = this.data;\n    }\n\n    onSubmit(data: any) {\n        var newData = new Color(\"\", data.isactive, data.code, data.buyercode, data.name, data.brand, data.department, data.division, jQuery('#hdImage').val(),data.remark);\n        this.colorService.add(newData).subscribe((data) => {\n            if (data.error == null) {\n                this.data = data;\n                alert('Color added successfully');\n                this.router.navigate([\"/color\"]);\n            }\n            else {\n                // update failure\n                this.errorMessage = data.error;\n                alert(this.errorMessage);\n            }\n        },\n            (error) => {\n                this.errorMessage = error;\n            }\n        );\n\n    }\n\n    onBack() {\n        this.router.navigate([\"color\"]);\n    }\n    changeDivision(value: string) {\n        console.log(value);\n    }\n    onUpdate(data: Color) {\n\n    }\n\n}"]}