{"version":3,"sources":["SizeRange/sizerange-list/sizerange-list.component.ts"],"names":["SizeRangeListComponent","sizerangeService","authService","router","fb","acctypeService","this","title","pagesizearr","isFormValuesChanged","prototype","ngOnInit","_this","isLoggedIn","navigate","sizenamecount","sizenamecountedit","paging","pagination_model_1","PaginationModel","searchModel","generalsearch_model_1","GeneralSearchModel","getSizeRangeList","subscribe","items","ACdata","error","errorMessage","sizerangeAddForm","group","id","name","forms_1","Validators","required","isactive","data","sizerange_model_1","SizeRange","itemid","changePage","i","Paging","PageNumber","addName1","jQuery","append","changeSize","PageSize","addName","onSubmit","namestring","val","sizerange","add","alert","prop","modal","onAdd","onUpdate","Value","update","onEdit","get","ValueList","length","isFormChanged","value","Id","oldData","isFormDataChanged","JSON","stringify","__decorate","core_1","Component","selector","templateUrl","providers","sizerange_service_1","SizeRangeService","FormBuilder","exports_1"],"mappings":"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","file":"sizerange-list.component.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from \"@angular/core\";\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\r\nimport { SizeRangeService } from \"../shared/sizerange.service\";\r\nimport { SizeRange } from \"../shared/sizerange.model\";\r\nimport { PaginationModel } from \"../../Pagination/shared/pagination.model\";\r\nimport { GeneralSearchModel } from \"../../Pagination/shared/generalsearch.model\";\r\nimport { SizeRangeListModel } from \"../shared/sizerange-list.model\";\r\nimport { Router } from \"@angular/router\";\r\nimport { AuthService } from \"../../auth.service\";\r\nimport { SearchGeneralFilter } from \"../../SearchGeneralFilter/shared/searchGeneralFilter.model\";\r\ndeclare var jQuery: any;\r\n\r\n@Component({\r\n    selector: 'sizerange',\r\n    templateUrl: 'app/SizeRange/sizerange-list/sizerange-list.component.html',\r\n    providers: [SizeRangeService, SizeRangeService, FormBuilder]\r\n})\r\n\r\nexport class SizeRangeListComponent {\r\n    data: SizeRange;\r\n    title = \"SizeRange\";\r\n    selectedData: SizeRange;\r\n    errorMessage: string;\r\n    searchModel: GeneralSearchModel;\r\n    paging: PaginationModel;\r\n    sizerangeAddForm: FormGroup;\r\n    ACdata: SizeRangeListModel;\r\n    pagesizearr: number[] = [10, 20, 30, 0];\r\n    types: SizeRange[];\r\n    itemid: string;\r\n    isFormValuesChanged = false;\r\n    sizenamecount: number;\r\n    sizenamecountedit: number;\r\n    sizerangeEditForm: FormGroup;\r\n    constructor(private sizerangeService: SizeRangeService,\r\n        private authService: AuthService,\r\n        private router: Router,\r\n        private fb: FormBuilder,\r\n        private acctypeService: SizeRangeService\r\n    ) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (!this.authService.isLoggedIn()) {\r\n            this.router.navigate([\"\"]);\r\n        }\r\n        this.sizenamecount = 1;\r\n        this.sizenamecountedit = 0;\r\n        this.paging = new PaginationModel(10, 1, \"Name\", 0, [], 0);\r\n        this.searchModel = new GeneralSearchModel(\"\", \"\", \"\", \"\", this.paging);\r\n        this.sizerangeService.getSizeRangeList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n        this.sizerangeAddForm = this.fb.group(\r\n            {\r\n                id: [\"\"],\r\n                name: [\"\", [Validators.required]],\r\n                isactive: [true]\r\n            }\r\n        );\r\n        this.data = new SizeRange(\"\", false, \"\",\"\",[]);\r\n        this.itemid = \"\";\r\n    }\r\n    changePage(i: number) {\r\n        this.searchModel.Paging.PageNumber = i;\r\n        this.sizerangeService.getSizeRangeList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n    }\r\n    addName1() {\n        this.isFormValuesChanged = true;\r\n        this.sizenamecountedit += 1;\n        jQuery('#sizeRangeContainer1').append(\"<div class=\\\"col_one_fifth\\\"></div><div class=\\\"col_four_fifth\\\"><input type=\\\"text\\\" id=\\\"txteditSizeName\" + this.sizenamecountedit + \"\\\" class=\\\"form-control\\\" /></div>\")\n    }\r\n    changeSize(i: number) {\r\n        if (i == 0) {\r\n            this.searchModel.Paging.PageNumber = 0;\r\n        } else {\r\n            this.searchModel.Paging.PageSize = i;\r\n            this.searchModel.Paging.PageNumber = 1;\r\n        }\r\n\r\n        this.sizerangeService.getSizeRangeList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n    }\r\n    addName() {\n        this.sizenamecount += 1;\n        jQuery('#sizeRangeContainer').append(\"<div class=\\\"col_one_fifth\\\"></div><div class=\\\"col_four_fifth\\\"><input type=\\\"text\\\" id=\\\"txtSizeName\" + this.sizenamecount + \"\\\" class=\\\"form-control\\\" /></div>\")\n    }\r\n    onSubmit(data: any) {\r\n\n        //get name string\n        var namestring = \"\";\n\n        for (var i = 1; i <= this.sizenamecount; i++) {\n            if (jQuery('#txtSizeName' + i).val !== \"\" && i < this.sizenamecount) {\n                namestring += jQuery('#txtSizeName' + i).val() + \"|\";\n            }\n            else if (jQuery('#txtSizeName' + i).val !== \"\" && i === this.sizenamecount) {\n                namestring += jQuery('#txtSizeName' + i).val();\n            }\n        }\n\n       //====\r\n        var sizerange = new SizeRange(\"\", data.isactive, data.name,namestring,[]);\r\n        this.sizerangeService.add(sizerange).subscribe((data) => {\r\n            if (data.error == null) {\r\n\r\n\r\n                this.sizerangeService.getSizeRangeList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n                alert(\"added successfully\");\r\n                this.data = new SizeRange(\"\", false, \"\",\"\",[]);\r\n                jQuery('#txtName').val('');\r\n                jQuery('#drType').val('');\r\n                jQuery('#ckIsActive').prop('checked', true);\r\n            } else {\r\n                // update failure\r\n                this.errorMessage = data.error;\r\n                alert(this.errorMessage);\r\n            }\r\n        },\r\n            (error) => {\r\n                this.errorMessage = error;\r\n                alert(this.errorMessage);\r\n            }\r\n        );\r\n        jQuery('#myModalAdd').modal('hide');\r\n\r\n\r\n\r\n    }\r\n    onAdd() {\r\n        jQuery('#txtName').val('');\r\n        jQuery('#drType').val('');\r\n        jQuery('#ckIsActive').prop('checked', true);\r\n    }\r\n    onUpdate(data: any) {\r\n        //get name string\n        var namestring = \"\";\n\n        for (var i = 1; i <= this.sizenamecountedit; i++) {\n            if (jQuery('#txteditSizeName' + i).val !== \"\" && i < this.sizenamecountedit) {\n                namestring += jQuery('#txteditSizeName' + i).val() + \"|\";\n            }\n            else if (jQuery('#txteditSizeName' + i).val !== \"\" && i === this.sizenamecountedit) {\n                namestring += jQuery('#txteditSizeName' + i).val();\n            }\n        }\n        data.Value = namestring;\n       //====\r\n        this.sizerangeService.update(data).subscribe((data) => {\r\n            if (data.error == null) {\r\n                this.data = data;\r\n                this.sizerangeService.getSizeRangeList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\r\n                alert(\"updated successfully\");\r\n                jQuery('#myModalEdit').modal('hide');\r\n                this.itemid == \"\";\r\n            }\r\n            else {\r\n                // update failure\r\n                this.errorMessage = data.error;\r\n                alert(this.errorMessage);\r\n            }\r\n        },\r\n            (error) => {\r\n                this.errorMessage = error;\r\n                alert(this.errorMessage);\r\n            }\r\n        );\r\n    }\r\n    onEdit(id: string) {\r\n        this.itemid = id;\r\n        if (id !== \"\") {\r\n            this.sizerangeService.get(id).subscribe((data) => {\r\n                this.data = data;\r\n                this.sizenamecountedit = this.data.ValueList.length;\r\n            });\r\n        }\r\n\r\n        \r\n    }\r\n    isFormChanged(value) {\r\n        this.sizerangeService.get(this.data.Id).subscribe((oldData) => {\r\n            this.isFormDataChanged(oldData);\r\n        });\r\n    }\r\n\r\n    isFormDataChanged(oldData: SizeRange) {\r\n        if (JSON.stringify(this.data) === JSON.stringify(oldData))\r\n            this.isFormValuesChanged = false;\r\n        else\r\n            this.isFormValuesChanged = true;\r\n    }\r\n}"]}