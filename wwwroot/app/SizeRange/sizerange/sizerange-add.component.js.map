{"version":3,"sources":["SizeRange/sizerange/sizerange-add.component.ts"],"names":["SizeRangeAddComponent","fb","sizerangeService","router","authService","activatedRoute","this","errorMessage","prototype","ngOnInit","isLoggedIn","navigate","sizenamecount","sizerangeForm","group","name","forms_1","Validators","required","isactive","buyercode","data","sizerange_model_1","SizeRange","title","addName","jQuery","append","ngAfterViewInit","errorDiv","nativeElement","hide","ngOnDestroy","onSubmit","_this","namestring","i","val","sizerange","add","subscribe","error","displayMessage","onBack","message","status","removeClass","innerHTML","addClass","slideDown","delay","slideUp","__decorate","core_1","ViewChild","Component","selector","template","providers","sizerange_service_1","SizeRangeService","FormBuilder","exports_1"],"mappings":"sxCAyDAA,sBAAA,WASI,QAAAA,uBACYC,GACAC,iBACAC,OACAC,YACAC,gBAJAC,KAAAL,GAAAA,GACAK,KAAAJ,iBAAAA,iBACAI,KAAAH,OAAAA,OACAG,KAAAF,YAAAA,YACAE,KAAAD,eAAAA,eARZC,KAAAC,aAAe,KA4FnB,MAjFIP,uBAAAQ,UAAAC,SAAA,WACSH,KAAKF,YAAYM,cAClBJ,KAAKH,OAAOQ,UAAU,KAE1BL,KAAKM,cAAgB,EACrBN,KAAKO,cAAgBP,KAAKL,GAAGa,OAErBC,MAAO,IACHC,QAAAC,WAAWC,WAEfC,WAAW,GACXC,WAAW,MAInBd,KAAKe,KAAO,GAAIC,mBAAAC,UAAU,IAAG,EAAM,GAAG,OACtCjB,KAAKkB,MAAQ,kBAEjBxB,sBAAAQ,UAAAiB,QAAA,WACInB,KAAKM,eAAiB,EACtBc,OAAO,uBAAuBC,OAAO,wDAA+DrB,KAAKM,cAAiB,0DAE9HZ,sBAAAQ,UAAAoB,gBAAA,WACIF,OAAOpB,KAAKuB,SAASC,eAAeC,QAGxC/B,sBAAAQ,UAAAwB,YAAA,WACI1B,KAAKJ,iBAAiBmB,KAAOf,KAAKe,MAGtCrB,sBAAAQ,UAAAyB,SAAA,SAASZ,MAKL,IAAK,GALTa,OAAA5B,KAGQ6B,WAAa,GAERC,EAAI,EAAGA,GAAK9B,KAAKM,cAAewB,IACE,KAAnCV,OAAO,eAAiBU,GAAGC,KAAcD,EAAE9B,KAAKM,cAChDuB,YAAcT,OAAO,eAAiBU,GAAGC,MAAQ,IAET,KAAnCX,OAAO,eAAiBU,GAAGC,KAAcD,IAAM9B,KAAKM,gBACzDuB,YAAcT,OAAO,eAAiBU,GAAGC,MAMjD,IAAIC,WAAY,GAAIhB,mBAAAC,UAAU,GAAGF,KAAKF,SAAS,GAAG,MAClDb,MAAKJ,iBAAiBqC,IAAID,WAAWE,UAAU,SAACnB,MACtB,MAAdA,KAAKoB,OACLP,MAAKb,KAAOA,KACZa,MAAK3B,aAAe,gCACpB2B,MAAKQ,eAAeR,MAAK3B,cAAc,KAIvC2B,MAAK3B,aAAec,KAAKoB,MACzBP,MAAKQ,eAAeR,MAAK3B,cAAc,KAG3C,SAACkC,OACGP,MAAK3B,aAAekC,MACpBP,MAAKQ,eAAeR,MAAK3B,cAAc,MAMvDP,sBAAAQ,UAAAmC,OAAA,WACIrC,KAAKH,OAAOQ,UAAU,eAI1BX,sBAAAQ,UAAAkC,eAAA,SAAeE,QAAiBC,QAC5BnB,OAAOpB,KAAKuB,SAASC,eAAegB,cACpCxC,KAAKuB,SAASC,cAAciB,UAAYH,QAEpCC,OAAUnB,OAAOpB,KAAKuB,SAASC,eAAekB,SAAS,mBACpDtB,OAAOpB,KAAKuB,SAASC,eAAekB,SAAS,iBAEpDtB,OAAOpB,KAAKuB,SAASC,eAAemB,UAAU,KAAMC,MAAM,KAAMC,QAAQ,MAzF5EC,YAACC,OAAAC,UAAU,4GAvDftD,sBAAAoD,YAACC,OAAAE,WACGC,SAAU,gBACVC,SAAU,0+DA2CVC,WAAYC,oBAAAC,iBAAiB5C,QAAA6C,wMAGjCC,UAAA,wBAAA9D","file":"sizerange-add.component.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit, OnDestroy } from \"@angular/core\";\nimport { FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { SizeRange } from \"../../SizeRange/shared/sizerange.model\";\nimport { SizeRangeService } from \"../../SizeRange/shared/sizerange.service\";\nimport { AuthService } from \"../../auth.service\";\n\ndeclare var jQuery: any;\n\n@Component({\n    selector: \"sizerange-add\",\n    template: `\n<div class=\"error-message\" #errorDiv></div>\n<div *ngIf=\"data\">\n    <h2>\n        <a href=\"javascript:void(0)\" (click)=\"onBack()\">\n            &laquo; Back to SizeRange List\n        </a>\n    </h2>\n  <div class=\"user-container\">    \n    <form class=\"form-user\" [formGroup]=\"sizerangeForm\" >\n        <h2 class=\"form-user-heading\">{{title}}</h2>\n        \n        <div class=\"form-group\">\n            <input formControlName=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Enter name\" value=\"this.data.Name\" autofocus />\n            <span class=\"validator-label valid\" *ngIf=\"this.sizerangeForm.controls.name.valid\">\n                <span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span>\n                valid!\n            </span>\n            <span class=\"validator-label invalid\" *ngIf=\"!this.sizerangeForm.controls.name.valid && !this.sizerangeForm.controls.name.pristine\">\n                <span class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"></span>\n                invalid\n            </span>\n        </div> \n      <div class=\"form-group\">\r\n            <input formControlName=\"buyercode\" type=\"text\" class=\"form-control\" placeholder=\"Enter buyer code\" value=\"this.data.BuyerCode\" autofocus />\r\n        </div>  \n        <div class=\"form-group\" id=\"sizeRangeContainer\">\r\n            <input type=\"text\" style=\"width:50px\" class=\"form-control\" placeholder=\"Enter a size\" id=\"txtSizeName1\" /> \r\n             \r\n        </div> \n        <div class=\"form-group\">\n            <button (click)=\"addName()\">Add More Size Name</button>\n        </div> \n        <div class=\"form-group\">\n           Is Active? <input formControlName=\"isactive\" type=\"checkbox\" value=\"this.data.IsActive\" autofocus />     \n        </div>                    \n        <div class=\"form-group\">\n            <input type=\"button\" class=\"btn btn-primary btn-block\" [disabled]=\"!sizerangeForm.valid\" value=\"Add\" (click)=\"onSubmit(this.sizerangeForm.value)\" />\n        </div>       \n    </form>\n  </div>\n</div>\n`,\n    providers: [SizeRangeService,FormBuilder]\n})\n\nexport class SizeRangeAddComponent {\n    data: SizeRange;\n    title: string;\n    sizenamecount: number;\n\n    sizerangeForm: FormGroup;\n    errorMessage = null;\n    @ViewChild('errorDiv') errorDiv: ElementRef;\n  \n    constructor(\n        private fb: FormBuilder,\n        private sizerangeService: SizeRangeService,\n        private router: Router,\n        private authService: AuthService,\n        private activatedRoute: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        if (!this.authService.isLoggedIn()) {\r\n            this.router.navigate([\"\"]);\r\n        }\n        this.sizenamecount = 1;\n        this.sizerangeForm = this.fb.group(\n            {\n                name: [\"\", [\n                    Validators.required\n                ]], \n                isactive: [true],\n                buyercode:[\"\"]                                     \n            }\n        );\n\n        this.data = new SizeRange(\"\",false,\"\",\"\",[]);\n        this.title = \"New Size Range\";\n    }\n    addName() {\n        this.sizenamecount += 1;\n        jQuery('#sizeRangeContainer').append(\"<input type=\\\"text\\\" style=\\\"width:50px\\\" id=\\\"txtSizeName\" + this.sizenamecount +  \"\\\" class=\\\"form-control\\\" placeholder= \\\"Enter a size\\\" />\" )\n    }\n    ngAfterViewInit() {\n        jQuery(this.errorDiv.nativeElement).hide();\n    }\n\n    ngOnDestroy() {\n        this.sizerangeService.data = this.data;\n    }\n\n    onSubmit(data: any) {\n\n       //get name string\n        var namestring = \"\";\n\n        for (var i = 1; i <= this.sizenamecount; i++) {\n            if (jQuery('#txtSizeName' + i).val !== \"\" && i<this.sizenamecount) {\n                namestring += jQuery('#txtSizeName' + i).val() + \"|\";\n            }\n            else if (jQuery('#txtSizeName' + i).val !== \"\" && i === this.sizenamecount) {\n                namestring += jQuery('#txtSizeName' + i).val();\n            }\n        }     \n     \n       //====\n\n        var sizerange = new SizeRange(\"\",data.isactive,\"\",\"\",[]);\n        this.sizerangeService.add(sizerange).subscribe((data) => {\n                if (data.error == null) {\n                    this.data = data;\n                    this.errorMessage = 'Size range added successfully';\n                    this.displayMessage(this.errorMessage, true);\n                }\n                else {\n                    // update failure\n                    this.errorMessage = data.error;\n                    this.displayMessage(this.errorMessage, false);\n                }\n            },\n                (error) => {\n                    this.errorMessage = error;\n                    this.displayMessage(this.errorMessage, false);\n                }\n            );\n       \n    }\n\n    onBack() {\n        this.router.navigate([\"sizerange\"]);\n    }\n\n\n    displayMessage(message: string, status: boolean) {\n        jQuery(this.errorDiv.nativeElement).removeClass();\n        this.errorDiv.nativeElement.innerHTML = message;\n\n        if (status) { jQuery(this.errorDiv.nativeElement).addClass(\"success-message\"); }\n        else { jQuery(this.errorDiv.nativeElement).addClass(\"error-message\"); }\n\n        jQuery(this.errorDiv.nativeElement).slideDown(1000).delay(6000).slideUp(1000);\n    }\n}"]}