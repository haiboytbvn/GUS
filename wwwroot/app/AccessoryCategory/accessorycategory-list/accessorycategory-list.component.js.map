{"version":3,"sources":["AccessoryCategory/accessorycategory-list/accessorycategory-list.component.ts"],"names":["AccessoryCategoryListComponent","accessorycategoryService","authService","router","fb","acctypeService","this","title","pagesizearr","isFormValuesChanged","prototype","ngOnInit","_this","isLoggedIn","navigate","paging","pagination_model_1","PaginationModel","searchModel","generalsearch_model_1","GeneralSearchModel","getAccessoryCategoryList","subscribe","items","ACdata","error","errorMessage","accessorycategoryAddForm","group","name","forms_1","Validators","required","isactive","acctype","pageall","getAll","getAccessoryTypeList","types","data","accessorycategory_model_1","AccessoryCategory","itemid","changePage","i","Paging","PageNumber","changeSize","PageSize","onSubmit","accessorycategory","add","alert","jQuery","val","prop","modal","onAdd","onUpdate","console","log","update","onEdit","id","get","isFormChanged","value","Id","oldData","isFormDataChanged","JSON","stringify","__decorate","core_1","Component","selector","templateUrl","providers","accessorycategory_service_1","AccessoryCategoryService","accessorytype_service_1","AccessoryTypeService","FormBuilder","exports_1"],"mappings":"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","file":"accessorycategory-list.component.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from \"@angular/core\";\nimport { FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { AccessoryCategoryService } from \"../shared/accessorycategory.service\";\nimport { AccessoryCategory } from \"../shared/accessorycategory.model\";\nimport { PaginationModel } from \"../../Pagination/shared/pagination.model\";\nimport { AccessoryCategoryListModel } from \"../shared/accessorycategory-list.model\";\nimport { Router } from \"@angular/router\";\nimport { AuthService } from \"../../auth.service\";\nimport { AccessoryTypeService } from \"../../AccessoryType/shared/accessorytype.service\";\nimport { AccessoryType } from \"../../AccessoryType/shared/accessorytype.model\";\nimport { AccessoryTypeListModel } from \"../../AccessoryType/shared/accessorytype-list.model\";\nimport { SearchGeneralFilter } from \"../../SearchGeneralFilter/shared/searchGeneralFilter.model\";\nimport { GeneralSearchModel } from \"../../Pagination/shared/generalsearch.model\";\ndeclare var jQuery: any;\n\n@Component({\n    selector: 'accessorycategory',\n    templateUrl: 'app/AccessoryCategory/accessorycategory-list/accessorycategory-list.component.html',\n    providers: [AccessoryCategoryService, AccessoryTypeService, FormBuilder]\n})\n\nexport class AccessoryCategoryListComponent {\n    data: AccessoryCategory;\n    title = \"Accessory Category\";\n    selectedData: AccessoryCategory;\n    errorMessage: string;\n    searchModel: GeneralSearchModel;\n    paging: PaginationModel;\n    accessorycategoryAddForm: FormGroup;\n    accessorycategories: AccessoryCategory[];\n    ACdata: AccessoryCategoryListModel;\n    pagesizearr: number[] = [10, 20, 30, 0];\n    types: AccessoryTypeListModel;\n    itemid: string;\n    isFormValuesChanged = false;\n    accessorycategoryEditForm: FormGroup;\n    constructor(private accessorycategoryService: AccessoryCategoryService,\n        private authService: AuthService,\n        private router: Router,\n        private fb: FormBuilder,\n        private acctypeService: AccessoryTypeService\n    ) {\n    }\n\n    ngOnInit() {\n        if (!this.authService.isLoggedIn()) {\n            this.router.navigate([\"\"]);\n        }\n        this.paging = new PaginationModel(10, 1, \"Name\", 0, [], 0);\n        this.searchModel = new GeneralSearchModel(\"\", \"\", \"\", \"\", this.paging);\n        this.accessorycategoryService.getAccessoryCategoryList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\n        this.accessorycategoryAddForm = this.fb.group(\n            {\n                name: [\"\", [Validators.required]],\n                isactive: [true],\n                acctype: [\"\", [Validators.required]]\n            }\n        );\n\n        var pageall = new PaginationModel(10, 0, \"Name\", 0, [], 0);\n        var getAll = new GeneralSearchModel(\"\", \"\", \"\", \"\", pageall);\n        this.acctypeService.getAccessoryTypeList(getAll).subscribe(items => this.types = items, error => this.errorMessage = <any>error);\n        this.data = new AccessoryCategory(\"\",false,\"\",\"\");\n        this.itemid = \"\";\n    }\n    changePage(i: number) {\n        this.searchModel.Paging.PageNumber = i;\n        this.accessorycategoryService.getAccessoryCategoryList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\n    }\n\n    changeSize(i: number) {\n        if (i == 0) {\n            this.searchModel.Paging.PageNumber = 0;\n        } else {\n            this.searchModel.Paging.PageSize = i;\n            this.searchModel.Paging.PageNumber = 1;\n        }\n\n        this.accessorycategoryService.getAccessoryCategoryList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\n    }\n  \n\n\n    onSubmit(data: any) {\n\n        var accessorycategory = new AccessoryCategory(\"\", data.isactive, data.name, data.acctype);\n            this.accessorycategoryService.add(accessorycategory).subscribe((data) => {\n                if (data.error == null) {\n                   \n\n                    this.accessorycategoryService.getAccessoryCategoryList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\n                    alert(\"added successfully\");\n                    this.data = new AccessoryCategory(\"\",false,\"\",\"\");\n                    jQuery('#txtName').val('');\n                    jQuery('#drType').val('');\n                    jQuery('#ckIsActive').prop('checked',true);\n                } else {\n                    // update failure\n                    this.errorMessage = data.error;\n                    alert(this.errorMessage);\n                }\n            },\n                (error) => {\n                    this.errorMessage = error;\n                    alert(this.errorMessage);\n                }\n            );\n            jQuery('#myModalAdd').modal('hide');\n        \n\n\n    }\n    onAdd() {\n        jQuery('#txtName').val('');\n        jQuery('#drType').val('');\n        jQuery('#ckIsActive').prop('checked', true);\n    }\n    onUpdate(data: any) {\n        // else, update it\n       // var accessorycategory = new AccessoryCategory(data.id, null, null, data.isactive, data.name, false, data.buyercode, data.acctype);\n        console.log(data);\n        this.accessorycategoryService.update(data).subscribe((data) => {\n            if (data.error == null) {\n                this.data = data;\n                this.accessorycategoryService.getAccessoryCategoryList(this.searchModel).subscribe(items => this.ACdata = items, error => this.errorMessage = <any>error);\n                alert(\"updated successfully\");\n                jQuery('#myModalEdit').modal('hide');\n                this.itemid == \"\";\n            }\n            else {\n                // update failure\n                this.errorMessage = data.error;\n                alert(this.errorMessage);\n            }\n        },\n            (error) => {\n                this.errorMessage = error;\n                alert(this.errorMessage);\n            }\n        );\n    }\n    onEdit(id: string) {\n        this.itemid = id;\n        if (id !== \"\") {\n            this.accessorycategoryService.get(id).subscribe((data) => {\n                this.data = data;\n            });\n        }\n    }\n    isFormChanged(value) {\n        this.accessorycategoryService.get(this.data.Id).subscribe((oldData) => {\n            this.isFormDataChanged(oldData);\n        });\n    }\n\n    isFormDataChanged(oldData: AccessoryCategory) {\n        if (JSON.stringify(this.data) === JSON.stringify(oldData))\n            this.isFormValuesChanged = false;\n        else\n            this.isFormValuesChanged = true;\n    }\n}"]}